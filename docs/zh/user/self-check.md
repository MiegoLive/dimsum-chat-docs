# 问题自检

## 端口服务失败

### 表现

- 浏览器源响应为 `localhost 已拒绝连接`。

- （主程序版本 <1.0.0）点心 Chat 主程序的 **设置** 面板中，端口号一行出现红色报错文字，连接数为 `0`，按钮文字为 `启动`。

### 可能原因

- 没有启动点心 Chat 主程序，而是先启动了 OBS，导致浏览器源加载时没有端口服务。这种情况下端口号一行无红色报错文字。

- 端口号被其他进程占用。

- 点心 Chat 主程序多开。

### 解决方案

- 刷新浏览器源，或先启动点心 Chat 主程序，再启动 OBS 等带有浏览器源的直播软件。

- 点击主程序的 **设置** 面板中端口号一行的 `启动` 按钮，若按钮变为 `停止`，则端口服务成功。

- 若仍不行，尝试重启主程序。

- 若仍不行，尝试重启计算机。

## 网页源加载失败

### 表现

- 浏览器源无任何内容展示。

- （主程序版本 <1.0.0）尝试点击点心 Chat 主程序的 **设置** 面板中的 `消息测试` 按钮组，均无反应。

- （主程序版本 >=1.0.0）点心 Chat 主程序的 **设置** 面板中 `已连接的 Websocket 会话` 列表中不存在对应名称的会话。

### 可能原因

- OBS 版本过低 (<28.0.0)，导致弹幕或小工具的代码不兼容，从而加载失败。

- 部分弹幕或小工具依赖网络加载，用户的网络环境不佳，加载速度慢。

### 解决方案

- 更新 OBS 到最新版。

- 等待加载 30 秒，点击 `消息测试` 按钮组观察是否有反应。若无反应，刷新浏览器源，并再次等待 30 秒，重复此步骤。

- （主程序版本 >=1.0.0）检查点心 Chat 主程序的 **设置** 面板中 `CDN 状态` 栏目，若显示超时，尝试点击该栏目以触发修改 hosts 文件。由于 Windows 系统的 hosts 文件权限限制，可能需要管理员权限。此外，当前系统用户需要有写入权限，并且 hosts 文件不能为只读。

## 直播间连接失败

### 表现

- （主程序版本 <1.0.0）尝试点击点心 Chat 主程序的 **设置** 面板中的 `消息测试` 按钮组，浏览器源中有反应。

- （主程序版本 >=1.0.0）点心 Chat 主程序的 **设置** 面板中 `已连接的 Websocket 会话` 列表中存在对应名称的会话，但消息接收不正常。一段时间（一般为30秒）后，主程序提示连接直播间超时。

- 实际的直播间消息无反应。

- 收到的消息数不增长或增长非常缓慢。

### 可能原因

- 直播间号填写错误，如抖音直播间号错填为抖音号。

- 抖音直播间主播开启了观众连麦功能，网页版直播间无法访问，因此无法获取弹幕。

- 抖音直播间主播开启了私密直播功能，导致游客身份无法获取弹幕。

- [触发了抖音的风控机制](#douyin-ban-ip)，ip 被封禁。

- 用户网络状况不佳。

- 直播平台服务器问题。

- 主播未开播或直播间没有实际消息。

### 解决方案

- 填写正确的房间号。

- 对于抖音直播间，关闭观众连麦功能。

- 更换网络。

- 等待直播平台服务器恢复。

## 触发了抖音的风控机制 {#douyin-ban-ip}

### 表现

- 使用系统浏览器在未登录状态下访问任意抖音直播间，弹出要求登录的二维码。

### 解决方案

- 等待抖音官方解除对你的风控。

- 紧急情况请下单远程服务，联系专业的技术人员解决。

- （主程序版本 >=0.4.9）从浏览器获取抖音的登录 cookie，并通过 cookie 以登录状态访问抖音直播间。